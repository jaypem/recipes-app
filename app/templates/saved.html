{% extends "base.html" %}
{% block content %}
  <section class="space-y-6">
    <h2 class="text-xl font-semibold">💾 Gespeicherte Rezepte</h2>

    <form action="/saved" method="get" class="flex flex-col sm:flex-row gap-3">
      <input type="text" name="q" value="{{ q }}" placeholder="🔎 Stichwortsuche (Titel, Zutaten, Schritte)"
        class="flex-1 rounded-xl border border-slate-700 bg-slate-900 px-3 py-2 focus:outline-none focus:ring focus:ring-teal-500">
      <button type="submit"
        class="rounded-xl bg-teal-400 px-4 py-2 font-semibold text-slate-900 hover:brightness-95 active:brightness-90">
        Suchen
      </button>
    </form>

    {% if not items %}
      <div class="bg-slate-800/60 rounded-2xl p-6 text-slate-300">
        🤷 Keine Ergebnisse. Tipp: mehrere Wörter probieren (FTS).
      </div>
    {% else %}
      <ul class="bg-slate-800/60 rounded-2xl divide-y divide-slate-700">
        {% for r in items %}
        <li class="flex items-center justify-between gap-4 p-4">
          <div class="min-w-0">
            <a href="/recipe/{{ r.id }}" class="block font-semibold hover:underline truncate">
              🍽️ {{ r.title }}
            </a>
            <div class="mt-1 text-sm text-slate-400 flex flex-wrap gap-2">
              <span class="inline-flex items-center gap-1 rounded-full bg-slate-700/60 px-2 py-0.5">⏱️ {{ r.time_minutes }} Min</span>
              <span class="inline-flex items-center gap-1 rounded-full bg-slate-700/60 px-2 py-0.5">⚙️ {{ r.difficulty }}</span>
              <span class="inline-flex items-center gap-1 rounded-full bg-slate-700/60 px-2 py-0.5">🧾 {{ r.ingredient_load }}</span>
            </div>
          </div>
          <form action="/delete/{{ r.id }}" method="post" class="shrink-0"
                onsubmit="return confirm('Wirklich löschen?')">
            <button type="submit"
              class="rounded-xl bg-rose-400/90 px-3 py-2 font-semibold text-rose-950 hover:brightness-95 active:brightness-90">
              🗑️ Löschen
            </button>
          </form>
        </li>
        {% endfor %}
      </ul>
    {% endif %}
  </section>
{% endblock %}
